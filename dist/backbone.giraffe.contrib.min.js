(function(){var t,e={}.hasOwnProperty,o=function(t,o){function n(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t};t=Giraffe.Contrib={},t.CollectionView=function(t){function e(t){this.listenTo(t.collection,"add",this._onAdd),this.listenTo(t.collection,"remove",this._onRemove),this.listenTo(t.collection,"reset",this._onReset),this.ItemView=this.itemView,e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._onAdd=function(t){var e,o;return o=this._calcAttachOptions(t),e=new this.ItemView({model:t}),this.attach(e,o)},e.prototype._onRemove=function(t){var e;return e=_.findWhere(this.children,{model:t}),null!=e?e.dispose():void 0},e.prototype._onReset=function(){return console.log("reset"),this.removeChildren(),this.afterRender()},e.prototype._calcAttachOptions=function(t){var e,o,n,i;return o={method:"prepend"},e=this.collection.indexOf(t),e>0&&(o.method="after",n=this.collection.at(e-1),i=_.findWhere(this.children,{model:n}),o.el=i),o},e.prototype.afterRender=function(){var t;return t=this,this.collection.each(function(e){return t._onAdd(e)})},e}(Giraffe.View)}).call(this);